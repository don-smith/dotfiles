#!/bin/zsh

recordscreen() {
  ffmpeg -thread_queue_size 32 -f x11grab -s 1920x1080 -r 25 -i $DISPLAY -c:v libx264 "$1-screen.mkv"
}

recordwebcam() {
  ffmpeg -thread_queue_size 1024 -f alsa -i hw:0 -thread_queue_size 32 -i /dev/video1 -c:v libx264 -c:a aac "$1-cam.mkv"
}

recordboth() {
  ffmpeg -thread_queue_size 1024 -f alsa -i hw:0 -thread_queue_size 32 -f x11grab -s 1920x1080 -r 25 -i $DISPLAY -f v4l2 -input_format mjpeg -i /dev/video0 -filter_complex "[2]scale=iw/2:ih/2 [pip]; [1][pip] overlay=main_w-overlay_w:0" -c:v libx264 -c:a aac "$1.mkv"
}

processrecording() {
  ffmpeg -i "$1.mkv" -c:v libx264 -af "volume=3.0" -crf 18 -preset slow -pix_fmt yuv420p -c:a aac "$1-youtube.mkv"
}

